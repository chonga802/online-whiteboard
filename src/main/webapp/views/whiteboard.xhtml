<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.prime.com.tr/ui">
<ui:composition template="/templates/masterLayout.xhtml">
    <ui:define name="body">
        <p:messages id="wbMessages"/>
        <h:form id="mainForm" prependId="false">
            <h:panelGrid id="headline" columns="7" cellpadding="0" cellspacing="0"
                         columnClasses="colTitle,colImg,colInvite,colImg,colCreated,colImg,colUsers">
                <h:outputText value="#{displayWhiteboard.title}"/>
                <h:graphicImage library="img" name="sendLink.png"/>
                <p:commandLink value="Invite people" ajax="false" style="margin-bottom: 3px; display: block;"
                               onclick="inviteWidget.show(); return false;"/>
                <h:graphicImage library="img" name="calendar.png"/>
                <h:outputText value="Created: #{displayWhiteboard.creationDate} by #{displayWhiteboard.creator}"/>
                <h:graphicImage library="img" name="userInfo.png"/>
                <h:outputText id="activeUsers" value="Active users: #{displayWhiteboard.usersCount}"/>
            </h:panelGrid>

            <h:panelGroup id="whiteboard" layout="block"/>
            <script type="text/javascript">
                /* <![CDATA[ */
                jQuery("#whiteboard").css({width: '#{displayWhiteboard.width}px', height: '#{displayWhiteboard.height}px'});
                /* ]]> */
            </script>

            <p:dialog id="toolboxDialog" header="Toolbox" draggable="true" resizable="true" closable="false"
                      visible="true"
                      position="'right',10" widgetVar="toolboxWidget" width="200">
                <ui:include src="/sections/toolbox.xhtml"/>
            </p:dialog>
            <p:dialog id="propertiesDialog" header="Edit Properties" draggable="true" resizable="true" closable="false"
                      visible="true" position="'right',10" widgetVar="propertiesWidget" width="300">
                <ui:include src="/sections/properties.xhtml"/>
            </p:dialog>
            <p:dialog id="monitoringDialog" header="Event Monitoring" draggable="true" resizable="true" closable="true"
                      visible="true" position="10,'bottom'" widgetVar="monitoringWidget" width="800">
                <ui:include src="/sections/monitoring.xhtml"/>
            </p:dialog>

            <ui:include src="/sections/dialogs.xhtml"/>
        </h:form>
        <script type="text/javascript">
            /* <![CDATA[ */
            jQuery(function() {
                var parentT = jQuery('#toolboxDialog').parent();
                parentT.css('left', parentT.offset().left - 325 + 'px');

                var parentP = jQuery('#propertiesDialog').parent();
                parentP.css('left', parentP.offset().left - 10 + 'px');

                var parentM = jQuery('#monitoringDialog').parent();
                parentM.css('top', parentM.offset().top - 10 + 'px');

                var toolboxItems = jQuery('.toolboxItem');
                toolboxItems.click(function() {
                    toolboxItems.removeClass('ui-state-selected');
                    jQuery(this).addClass('ui-state-selected');
                });

                // create a global whiteboard designer instance
                whiteboardDesigner = new WhiteboardDesigner(new WhiteboardConfig());
            });
            /* ]]> */
        </script>
    </ui:define>
    <ui:define name="resources">
        <h:outputStylesheet library="css" name="whiteboard.css"/>
        <h:outputScript library="js" name="json2-min.js" target="head"/>
        <h:outputScript library="js" name="uuid.js" target="head"/>
        <h:outputScript library="js" name="jquery.validate.min.js" target="head"/>
        <h:outputScript library="js" name="raphael-min.js" target="head"/>
        <h:outputScript library="js" name="wboard-config.js" target="head"/>
        <h:outputScript library="js" name="wboard-drawing.js" target="body"/>
    </ui:define>
</ui:composition>
</html>